---
import '../styles/global.css';
import BaseHead from '../components/BaseHead.astro';
import Sidebar from '../components/Sidebar.astro';
import Footer from '../components/Footer.astro';

interface Props {
  title: string;
  description?: string;
  activeNav?: 'index' | 'writing' | 'projects';
  ogType?: 'website' | 'article';
}

const {
  title,
  description,
  activeNav,
  ogType,
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={title} description={description} ogType={ogType} canonicalURL={canonicalURL} />
  </head>

  <body>
    <div class="site-wrapper">
      <Sidebar activeNav={activeNav} />

      <main class="content-area">
        <slot />
        <Footer />
      </main>
    </div>
  </body>
</html>

<style>
  .site-wrapper {
    max-width: 1000px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
  }

  @media (min-width: 768px) {
    .site-wrapper {
      flex-direction: row;
      padding: var(--space-xl) var(--space-lg);
      gap: var(--space-xl);
      align-items: flex-start;
    }
  }

  .content-area {
    flex-grow: 1;
    max-width: 600px;
    min-width: 0;
    padding: var(--space-md) var(--space-sm);
  }

  @media (min-width: 768px) {
    .content-area {
      padding: 0;
    }
  }
</style>
